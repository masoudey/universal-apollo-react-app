{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./server/Schema/index.js","webpack:///./server/Schema/post.js","webpack:///./server/Schema/user.js","webpack:///./server/helpers/renderer.js","webpack:///./server/index.js","webpack:///./server/models/index.js","webpack:///./server/models/post.js","webpack:///./server/models/user.js","webpack:///./server/resolvers/authorization.js","webpack:///./server/resolvers/index.js","webpack:///./server/resolvers/post.js","webpack:///./server/resolvers/user.js","webpack:///./server/subscription/index.js","webpack:///./server/subscription/post.js","webpack:///./shared/app.js","webpack:///./shared/components/Header.js","webpack:///./shared/components/session/withAuth.js","webpack:///./shared/components/session/withSession.js","webpack:///./shared/containers/Dashboard.js","webpack:///./shared/containers/Home.js","webpack:///./shared/containers/auth/signIn.js","webpack:///./shared/containers/auth/signUp.js","webpack:///./shared/queries/userQueries.js","webpack:///./shared/routes.js","webpack:///external \"apollo-cache-inmemory\"","webpack:///external \"apollo-client\"","webpack:///external \"apollo-link-http\"","webpack:///external \"apollo-link-schema\"","webpack:///external \"apollo-server\"","webpack:///external \"apollo-server-express\"","webpack:///external \"axios\"","webpack:///external \"babel-polyfill\"","webpack:///external \"bcrypt\"","webpack:///external \"body-parser\"","webpack:///external \"cookie-parser\"","webpack:///external \"cors\"","webpack:///external \"dataloader\"","webpack:///external \"dotenv/config\"","webpack:///external \"es-cookie\"","webpack:///external \"express\"","webpack:///external \"fs\"","webpack:///external \"generate-password\"","webpack:///external \"graphql-resolvers\"","webpack:///external \"graphql-tag\"","webpack:///external \"graphql-tools\"","webpack:///external \"http\"","webpack:///external \"https\"","webpack:///external \"isomorphic-unfetch\"","webpack:///external \"jsonwebtoken\"","webpack:///external \"mongoose\"","webpack:///external \"path\"","webpack:///external \"react\"","webpack:///external \"react-apollo\"","webpack:///external \"react-dom/server\"","webpack:///external \"react-helmet\"","webpack:///external \"react-router-dom\""],"names":["linkSchema","gql","userSchema","postSchema","HTML","content","state","helmet","htmlAttrs","htmlAttributes","toComponent","bodyAttrs","bodyAttributes","__html","title","toString","meta","webConfig","siteURL","JSON","stringify","replace","http","https","fs","mongoose","connect","process","env","DB_CONNECTION_STRING","useNewUrlParser","then","console","log","catch","err","PORT","configurations","production","ssl","port","hostname","development","environment","config","app","use","origin","credentials","bodyParser","json","urlencoded","extended","express","static","getCurrentUser","req","token","cookies","jwt","verify","JWT_SECRET","AuthenticationError","apollo","ApolloServer","typeDefs","resolvers","formatError","message","error","context","connection","models","currentUser","secret","applyMiddleware","path","server","createServer","key","readFileSync","cert","installSubscriptionHandlers","res","URL_Param","params","param","client","ApolloClient","ssrMode","link","uri","headers","cookie","header","cache","InMemoryCache","Html","url","initialState","extract","Helmet","renderStatic","html","status","send","end","listen","graphqlPath","User","Post","Schema","type","String","required","desc","cotagory","img","date","Date","default","now","userId","Types","ObjectId","user","ref","model","username","unique","firstName","lastName","password","email","userImage","bio","role","createdAt","users","pre","next","isModified","bcrypt","genSalt","salt","hash","isAuthenticated","parent","args","me","skip","ForbiddenError","isAdmin","isPostOwner","parents","id","findById","lean","post","userResolvers","postResolvers","toCursorHash","Buffer","from","string","fromCursorHash","Query","posts","cursor","limit","cursorOptions","$lte","find","sort","hasNextPage","length","edges","slice","pageInfo","endCursor","Mutation","createPost","save","pubsub","publish","EVENTS","POST","CREATED","postCreated","deletePost","findByIdAndDelete","Subscription","subscribe","asyncIterator","createToken","expiresIn","sign","generatePasswordHash","saltRound","hashSync","validatePassword","compare","test","signUp","findOne","UserInputError","newUser","signIn","isValidPass","updateUser","findOneAndUpdate","$set","new","deleteUser","setUserImage","changeEmail","currentEmail","newEmail","changePassword","hashPassword","passwordReset","generatedPassword","generator","generate","numbers","data","axios","response","POST_EVENTS","PubSub","App","props","session","Component","Header","withAuth","GET_CURRENT_USER","loading","networkStatus","conditionFn","withSession","refetch","Dashboard","Home","Cookies","SIGNIN_USER","SignIn","onChange","e","target","name","value","setState","onSubmit","preventDefault","set","history","push","graphQLErrors","map","x","validationForm","isInvalid","class","SIGNUP_USER","passwordConfirm","passwordMatch","SignUp","handleSubmit","refresh","confirmPW","isMatch","validateForm","userName","head","GET_CLIENT_USER","Routes"],"mappings":"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","file":"server.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./server/index.js\");\n","import { gql } from \"apollo-server-express\";\r\n\r\nimport userSchema from \"./user\";\r\nimport postSchema from \"./post\";\r\n\r\nconst linkSchema = gql`\r\n  type Query {\r\n    _: Boolean\r\n  }\r\n\r\n  type Mutation {\r\n    _: Boolean\r\n  }\r\n\r\n  type Subscription {\r\n    _: Boolean\r\n  }\r\n`;\r\n\r\nexport default [linkSchema, userSchema, postSchema];","import { gql } from \"apollo-server-express\";\r\n\r\nexport default gql`\r\n    extend type Query {\r\n        post(id: ID!): Post!\r\n        posts(cursor: String, limit: Int): PostConnection!\r\n    }\r\n\r\n    extend type Mutation {\r\n        createPost(title: String!, desc: String!, content: String!, cotagory: String!, img: String!): Post!\r\n        deletePost(id: ID!): Boolean!\r\n    }\r\n\r\n    type PostConnection {\r\n        edges: [Post!]!\r\n        pageInfo: PageInfo!\r\n    }\r\n\r\n    type PageInfo {\r\n        hasNextPage: Boolean!\r\n        endCursor: String!\r\n    }\r\n\r\n    type Post {\r\n        _id: ID!\r\n        title: String!\r\n        desc: String!\r\n        content: String!\r\n        cotagory: String!\r\n        img: String!\r\n        date: String!\r\n        user: User!\r\n    }\r\n\r\n    extend type Subscription {\r\n        postCreated: PostCreated!\r\n    }\r\n\r\n    type PostCreated {\r\n        post: Post!\r\n    }\r\n`;","import { gql } from \"apollo-server-express\";\r\n\r\nexport default gql`\r\n    extend type Query {\r\n        currentUser: User\r\n        user(id: ID!): User\r\n        users: [User!]\r\n    }\r\n\r\n    extend type Mutation {\r\n        signUp(\r\n            username: String!\r\n            email: String!\r\n            password: String!\r\n            firstName: String! \r\n            lastName: String!\r\n            profileImage: String\r\n        ): AuthPayload!\r\n        signIn(email: String!, password: String!): AuthPayload!\r\n        updateUser(email: String!, username: String!, firstName: String!, lastName: String!): User!\r\n        deleteUser(id: ID!): Boolean!\r\n        setUserImage(email: String!, userImage: String!): User!\r\n        changeEmail(currentEmail: String!, newEmail: String!): User!\r\n        changePassword(email: String!, password: String!): User!\r\n        passwordReset(email: String!): User! \r\n    }\r\n\r\n    type AuthPayload {\r\n        token: String!\r\n        user: User!\r\n    }\r\n\r\n    type User {\r\n        _id: ID!\r\n        username: String!\r\n        password: String!\r\n        email: String!\r\n        firstName: String! \r\n        lastName: String!\r\n        bio: String\r\n        userImage: String\r\n        rol: String\r\n        createdAt: String!\r\n        posts: [Post!]\r\n    }\r\n`;","import React from \"react\";\r\nimport webConfig from \"../../webConfig\";\r\n\r\nconst HTML = ({ content, state, helmet }) => {\r\n    const htmlAttrs = helmet.htmlAttributes.toComponent();\r\n    const bodyAttrs = helmet.bodyAttributes.toComponent();\r\n\r\n    return (\r\n        <html lang=\"en\" {...htmlAttrs}>\r\n            <head dangerouslySetInnerHTML={{\r\n            __html: `${helmet.title.toString()}\r\n            <meta charset=\"UTF-8\">\r\n            <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n            <meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\">\r\n            ${helmet.meta.toString()}\r\n            <link rel=\"shortcut icon\" href=\"${webConfig.siteURL}/assets/graphics/favicon.ico\">\r\n            <link href=\"${webConfig.siteURL}/styles.min.css\" rel=\"stylesheet\" type=\"text/css\" />\r\n            <link href=\"https://fonts.googleapis.com/css?family=Lato:400,700\" rel=\"stylesheet\" />\r\n            <link rel=\"stylesheet\" href=\"https://use.fontawesome.com/releases/v5.2.0/css/all.css\" integrity=\"sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ\" crossOrigin=\"anonymous\" />\r\n            `}}></head>\r\n            <body {...bodyAttrs}>\r\n                <div id=\"root\" dangerouslySetInnerHTML={{ __html: content }} />\r\n                <script dangerouslySetInnerHTML={{\r\n                    __html: `window.__APOLLO_STATE__=${JSON.stringify(state).replace(/</g, '\\\\u003c')};`,\r\n                }} />\r\n                <script src=\"https://cdn.ckeditor.com/4.6.2/standard/ckeditor.js\"></script>\r\n                <script src={`${webConfig.siteURL}/bundle.js`}></script>\r\n            </body>\r\n        </html>\r\n    )\r\n}\r\n\r\nexport default HTML;","import 'babel-polyfill';\r\nimport 'isomorphic-unfetch';\r\nimport 'dotenv/config';\r\nimport path from \"path\";\r\nimport * as http from \"http\";\r\nimport * as https from \"https\";\r\nimport * as fs from \"fs\";\r\nimport cors from \"cors\";\r\nimport bodyParser from \"body-parser\";\r\nimport cookieParser from \"cookie-parser\";\r\nimport express from \"express\";\r\nimport jwt from \"jsonwebtoken\";\r\nimport React from \"react\";\r\nimport { renderToString, renderToStaticMarkup } from \"react-dom/server\";\r\nimport { StaticRouter, matchPath } from \"react-router-dom\";\r\nimport { ApolloServer } from 'apollo-server-express';\r\nimport { AuthenticationError } from 'apollo-server';\r\nimport { ApolloProvider, getDataFromTree, renderToStringWithData } from 'react-apollo';\r\nimport { ApolloClient } from 'apollo-client';\r\nimport { SchemaLink } from \"apollo-link-schema\";\r\nimport { createHttpLink } from \"apollo-link-http\";\r\nimport { InMemoryCache } from 'apollo-cache-inmemory';\r\nimport { makeExecutableSchema } from \"graphql-tools\";\r\nimport mongoose from 'mongoose';\r\nimport { Helmet } from 'react-helmet';\r\nimport DataLoader from \"dataloader\";\r\nimport webConfig from \"../webConfig\";\r\n\r\n\r\nimport HTML from \"./helpers/renderer\";\r\nimport App from \"../shared/app\";\r\n\r\nimport typeDefs from \"./Schema\";\r\nimport resolvers from \"./resolvers\";\r\nimport models from \"./models\";\r\n\r\nmongoose.connect(process.env.DB_CONNECTION_STRING, {useNewUrlParser: true}).then(() => {\r\n    console.log(\"Connection to Database Successfull!\");\r\n}).catch((err) => {\r\n    console.log(\"Connection to Database Error\", err);\r\n});\r\n\r\nconst PORT = process.env.PORT || 5000;\r\nconst configurations = {\r\n    production: {ssl: true, port: PORT, hostname: 'whatever.com'},\r\n    development: {ssl: false, port: PORT, hostname: 'localhost'}\r\n}\r\n\r\nconst environment = process.env.NODE_ENV || 'production';\r\nconst config = configurations[environment];\r\n\r\n\r\nconst app = express();\r\napp.use(cors({\r\n    origin: webConfig.siteURL,\r\n    credentials: true\r\n}))\r\n\r\napp.use(bodyParser.json());\r\napp.use(bodyParser.urlencoded({ extended: true }));\r\napp.use(cookieParser());\r\napp.use('/', express.static('public'));\r\n\r\nconst getCurrentUser = async req => {\r\n    const token = req.cookies.token ? req.cookies.token : null;\r\n    if (token) {\r\n        try {\r\n            return await jwt.verify(token, process.env.JWT_SECRET);\r\n        } catch (e) {\r\n            throw new AuthenticationError('Session Expired...');\r\n        }\r\n    }\r\n}\r\n\r\nconst apollo = new ApolloServer({\r\n    typeDefs,\r\n    resolvers,\r\n    formatError: error => {\r\n        const message = error.message\r\n            .replace('mogoose Validation Error: ', '')\r\n            .replace('Validation error', '')\r\n        return {\r\n            ...error,\r\n            message,\r\n        };\r\n    },\r\n    context: async ({ req, connection}) => {\r\n        if (connection) {\r\n            return {\r\n                models,\r\n            };\r\n        }\r\n\r\n\r\n        if (req) {\r\n            // const currentUser = await getCurrentUser(req);\r\n            const currentUser = {\r\n                \"_id\": {\r\n                    \"$oid\": \"5ba9f7a39dab691ef4af9ff2\"\r\n                },\r\n                \"users\": [],\r\n                \"username\": \"masoudey\",\r\n                \"email\": \"masoud.ey@gmail.com\",\r\n                \"password\": \"$2b$10$uah18eeMB0O0iji9zwqXxeptqUiwbqXZdikxF9t.M2p67zHs4LEkO\",\r\n                \"firstName\": \"masoud\",\r\n                \"lastName\": \"eyvat\",\r\n                \"createdAt\": {\r\n                    \"$date\": \"2018-09-25T08:53:55.570Z\"\r\n                },\r\n                \"__v\": 0\r\n            }\r\n            \r\n            return {\r\n                models,\r\n                currentUser,\r\n                secret: process.env.JWT_SECRET,\r\n            };\r\n        }\r\n    },\r\n});\r\napollo.applyMiddleware({ app, path: '/graphql'});\r\n\r\nvar server\r\n\r\nif (config.ssl) {\r\n    server = https.createServer(\r\n        {\r\n            key: fs.readFileSync(`./ssl/${environment}/server.key`),\r\n            cert: fs.readFileSync(`./ssl/${environment}/server.crt`)\r\n        },\r\n        app\r\n    )\r\n} else {\r\n    server = http.createServer(app)\r\n}\r\n\r\napollo.installSubscriptionHandlers(server);\r\n\r\napp.use([\"*/:param\", '*'], (req, res) => {\r\n    const URL_Param = req.params.param ? req.params.param : null;\r\n\r\n    // const schema = makeExecutableSchema({\r\n    //     typeDefs,\r\n    //     resolvers,\r\n    // })\r\n    const client = new ApolloClient({\r\n        ssrMode: true,\r\n        link: createHttpLink({\r\n            uri: `${webConfig.siteURL}/graphql`,\r\n            credentials: 'same-origin',\r\n            headers: {\r\n                cookie: req.header('Cookie'),\r\n            },\r\n        }),\r\n        cache: new InMemoryCache(),\r\n    });\r\n\r\n    const context = {\r\n        URL_Param\r\n    };\r\n\r\n    const Html = (\r\n        <ApolloProvider client={client} >\r\n            <StaticRouter location={req.url} context={context} >\r\n                <App />\r\n            </StaticRouter>\r\n        </ApolloProvider>\r\n    );\r\n\r\n    getDataFromTree(Html).then(() => {\r\n        const content = renderToString(Html);\r\n        const initialState = client.extract();\r\n        const helmet = Helmet.renderStatic();\r\n\r\n        const html = <HTML content={content} state={initialState} helmet={helmet} />;\r\n\r\n        res.status(200);\r\n        res.send(`<!doctype html>\\n${renderToStaticMarkup(html)}`);\r\n        res.end();\r\n    })\r\n});\r\n\r\nserver.listen({ port: config.port }, () => {\r\n    console.log(\r\n        'ðŸš€ Server ready at',\r\n        `http${config.ssl ? 's' : ''}://${config.hostname}:${config.port}${apollo.graphqlPath}`\r\n      )\r\n})\r\n\r\n","import userSchema from \"./user\";\r\nimport postSchema from \"./post\";\r\n\r\nconst models = {\r\n    User: userSchema,\r\n    Post: postSchema,\r\n}\r\n\r\nexport default models;","import mongoose from \"mongoose\";\r\n\r\nconst Schema = mongoose.Schema;\r\n\r\nconst Post = new Schema({\r\n    title: {\r\n        type: String,\r\n        required: true\r\n    },\r\n    desc: {\r\n        type: String,\r\n        required: true\r\n    },\r\n    content: {\r\n        type: String,\r\n        required: true\r\n    },\r\n    cotagory: {\r\n        type: String,\r\n        required: true\r\n    },\r\n    img: {\r\n        type: String,\r\n        required: true\r\n    },\r\n    date: {\r\n        type: Date,\r\n        default: Date.now\r\n    },\r\n    userId: {\r\n        type: Schema.Types.ObjectId,\r\n    },\r\n    user: {\r\n        type: Schema.Types.ObjectId,\r\n        ref: 'User'\r\n    }\r\n});\r\n\r\nexport default mongoose.model('Post', Post);","import mongoose from \"mongoose\";\r\nimport bcrypt from \"bcrypt\";\r\n\r\nconst Schema = mongoose.Schema;\r\n\r\nconst User = new Schema({\r\n    username: {\r\n        type: String,\r\n        required: true,\r\n        unique: true\r\n    },\r\n    firstName: {\r\n        type: String,\r\n        required: true\r\n    },\r\n    lastName: {\r\n        type: String,\r\n        required: true\r\n    },\r\n    password: {\r\n        type: String,\r\n        required: true\r\n    },\r\n    email: {\r\n        type: String,\r\n        required: true\r\n    },\r\n    userImage: {\r\n        type: String,\r\n    },\r\n    bio: {\r\n        type: String,\r\n    },\r\n    role: {\r\n        type: String,\r\n    },\r\n    createdAt: {\r\n        type: Date,\r\n        default: Date.now\r\n    },\r\n    users: [{\r\n        type: Schema.Types.ObjectId,\r\n        ref: 'Post'\r\n    }]\r\n});\r\n\r\nUser.pre('save', function (next) {\r\n    if(!this.isModified('password')) {\r\n        return next();\r\n    }\r\n\r\n    bcrypt.genSalt(10, (err, salt) =>{\r\n        if(err) return next(err);\r\n\r\n        bcrypt.hash(this.password, salt, (err, hash) => {\r\n            this.password = hash;\r\n\r\n            next();\r\n        })\r\n    })\r\n})\r\n\r\n\r\nexport default mongoose.model('User', User);\r\n","import { ForbiddenError } from \"apollo-server\";\r\nimport { combineResolvers, skip } from \"graphql-resolvers\";\r\n\r\nexport const isAuthenticated = (parent, args, { me }) =>\r\n    me ? skip : new ForbiddenError('Not authenticated');\r\n\r\nexport const isAdmin = combineResolvers(\r\n    isAuthenticated,\r\n    (parent, args, { me: { role } }) =>\r\n        role === 'ADMIN'\r\n            ? skip\r\n            : new ForbiddenError('Not authorized as admin'),\r\n);\r\n\r\nexport const isPostOwner = async (\r\n    parents,\r\n    { id },\r\n    {models, me },\r\n) => {\r\n    const post = await models.Post.findById(id, { lean: true });\r\n    if (post.userId !== me.id) {\r\n        throw new ForbiddenError('Not authenticated as owner');\r\n    }\r\n    return skip;\r\n};","import postResolvers from \"./post\";\r\nimport userResolvers from \"./user\";\r\n\r\nexport default [userResolvers, postResolvers]","import { combineResolvers } from \"graphql-resolvers\";\r\n\r\nimport { isAuthenticated, isPostOwner } from \"./authorization\";\r\n\r\nimport pubsub, { EVENTS } from \"../subscription\";\r\n\r\nconst toCursorHash = string => Buffer.from(string).toString('base64');\r\n\r\nconst fromCursorHash = string =>\r\n    Buffer.from(string, 'base64').toString('ascii');\r\n\r\nexport default {\r\n    Query: {\r\n        posts: async (parent, { cursor, limit = 50 }, { models }) => {\r\n            const cursorOptions = cursor\r\n                ? {createdAt: {$lte: fromCursorHash(cursor)}}\r\n                : {};\r\n                console.log(fromCursorHash(cursor))\r\n                const posts = await models.Post.find(\r\n                    cursorOptions,\r\n                    null,\r\n                    {sort: { createdAt: 'desc'}, limit: limit + 1}\r\n                );\r\n  \r\n                const hasNextPage = posts.length > limit;\r\n                const edges = hasNextPage ? posts.slice(0, -1) : posts;\r\n                return {\r\n                    edges,\r\n                    pageInfo: {\r\n                        endCursor: toCursorHash(\r\n                            edges[edges.length - 1].date.toString(),\r\n                        ),\r\n                    },\r\n                };\r\n        },\r\n        post: async (parent, { id }, { models }) => \r\n            await models.Post.findById(id),\r\n    },\r\n\r\n    Mutation: {\r\n        createPost: combineResolvers(\r\n            isAuthenticated,\r\n            async (parent, { title, desc, content, cotagory, img }, { models, me }) => {\r\n                const post = await new models.Post({\r\n                    title,\r\n                    desc,\r\n                    content,\r\n                    cotagory,\r\n                    img,\r\n                    userId: me.id,\r\n                }).save();\r\n\r\n                pubsub.publish(EVENTS.POST.CREATED, {\r\n                    postCreated: { post },\r\n                });\r\n\r\n                return post;\r\n            },\r\n        ),\r\n\r\n        deletePost: combineResolvers(\r\n            isAuthenticated,\r\n            isPostOwner,\r\n            async (parent, { id }, { models }) =>\r\n                await models.Post.findByIdAndDelete({ id }),\r\n        ),\r\n    },\r\n\r\n    Post: {\r\n        user: async (post, args, { models }) =>\r\n            await models.User.findById(post.userId),\r\n    },\r\n\r\n    Subscription: {\r\n        postCreated: {\r\n            subscribe: () => pubsub.asyncIterator(EVENTS.POST.CREATED),\r\n        },\r\n    },\r\n};","import jwt from \"jsonwebtoken\";\r\nimport generator from \"generate-password\";\r\nimport axios from \"axios\";\r\nimport { combineResolvers } from \"graphql-resolvers\";\r\nimport { AuthenticationError, UserInputError } from \"apollo-server\";\r\n\r\nimport webConfig from \"../../webConfig\";\r\nimport { isAuthenticated, isAdmin } from \"./authorization\";\r\n\r\nimport bcrypt from \"bcrypt\";\r\n\r\nconst createToken = async (user, secret, expiresIn) => {\r\n    const { id, email, username, role } = user;\r\n    return await jwt.sign({id, email, username, role }, secret, {expiresIn,});\r\n};\r\n\r\nconst generatePasswordHash = async function() {\r\n    const saltRound = 10;\r\n    return await bcrypt.hashSync(this.password, saltRound);    \r\n}\r\n\r\nconst validatePassword = async function(password) {\r\n    return await bcrypt.compare(password, this.password);\r\n}\r\n\r\nexport default {\r\n    Query: {\r\n        users: async (parent, args, { models, test }) => \r\n            await models.User.find(),\r\n\r\n        user: async (parent, { id }, { models }) =>\r\n            await models.User.findById(id),\r\n\r\n        currentUser: async (parent, args, { models, currentUser }) => {\r\n            if (!currentUser) {\r\n                return null;\r\n            }\r\n\r\n            return await models.User.findById(currentUser.id)\r\n        },\r\n    },\r\n    Mutation: {\r\n        signUp: async (\r\n            parent,\r\n            { username, email, password, firstName, lastName, userImage },\r\n            { models, secret },\r\n        ) => {\r\n            const user = await models.User.findOne({ email });\r\n\r\n            if (user) {\r\n                throw new UserInputError('User Exist');\r\n            }\r\n\r\n            const newUser = await new models.User({\r\n                username,\r\n                email,\r\n                password,\r\n                firstName, \r\n                lastName,\r\n                userImage,\r\n            }).save();\r\n            return { \r\n                token: createToken(newUser, secret, '30m'),\r\n                newUser,\r\n            };\r\n        },\r\n\r\n        signIn: async (\r\n            parents,\r\n            { email, password },\r\n            { models, secret },\r\n        ) => {\r\n            const user = await models.User.findOne({ email });\r\n\r\n            if (!user) {\r\n                throw new UserInputError('User doesnt exist');\r\n            }\r\n\r\n            const isValidPass = await validatePassword(password)\r\n            if (!isValidPass) {\r\n                throw new AuthenticationError('Invalid password');\r\n            }\r\n\r\n            return {\r\n                token: createToken(user, secret, '30m'),\r\n                user,\r\n            }\r\n        },\r\n        updateUser: combineResolvers(\r\n            isAuthenticated,\r\n            async (parent, { email, username, firstName, lastName}, { models, currentUser }) => {\r\n                const user = await models.User.findOneAndUpdate({ email }, { $set: {username, firstName, lastName}}, {new: true});\r\n\r\n                if (!user) {\r\n                    throw new UserInputError('User not found');\r\n                }\r\n\r\n                return user;\r\n            },\r\n        ),\r\n        deleteUser: combineResolvers(\r\n            isAdmin,\r\n            async (parent, { id }, { models }) =>\r\n                await models.User.findByIdAndDelete({id})\r\n        ),\r\n        setUserImage: async (parent, { email, userImage}, { models, currentUser}) => {\r\n            const user = await models.User.findOneAndUpdate({ email }, {$set: { userImage }}, {new: true});\r\n\r\n            if (!user) {\r\n                throw new UserInputError('User not found');\r\n            }\r\n\r\n            return user;\r\n        },\r\n        changeEmail: async (parent, { currentEmail, newEmail }, { models }) => {\r\n            const user = await models.User.findOneAndUpdate({ email: currentEmail }, {$set: {email: newEmail}}, {new: true});\r\n\r\n            if(!user) {\r\n                throw new UserInputError('User not found');\r\n            }\r\n\r\n            return user;\r\n        },\r\n        changePassword: async (parent, { email, password }, { models }) => {\r\n            const hashPassword = await generatePasswordHash(password);\r\n            const user = await models.User.findOneAndUpdate({ email }, {$set: { password: hashPassword}}, {new: true});\r\n\r\n            if (!user) {\r\n                throw new UserInputError('User not found');\r\n            }\r\n\r\n            return user;\r\n        },\r\n        passwordReset: async (parent, { email }, { models }) => {\r\n            const generatedPassword = generator.generate({ length: 10, numbers: true});\r\n            const hashPassword = await generatePasswordHash(generatedPassword);\r\n            const user = await models.User.findOneAndUpdate({ email }, {$set: { password: hashPassword}}, {new: true});\r\n\r\n            if (!user) {\r\n                throw new UserInputError('User not found');\r\n            } else {\r\n                const data = {\r\n                    email,\r\n                    generatedPassword\r\n                }\r\n\r\n                axios.post(`${webConfig.siteURL}/password-reset`, data)\r\n                .then((response)=>{\r\n                    console.log('Email has sent!');\r\n                })\r\n                .catch((err) => {\r\n                    console.log(err)\r\n                })\r\n            }\r\n\r\n            return user;\r\n        }\r\n    },\r\n    User: {\r\n        posts: async (user, args, { models }) =>\r\n            await models.Post.find({ userId: user.id })\r\n    }\r\n}","import { PubSub } from \"apollo-server\";\r\n\r\nimport * as POST_EVENTS from \"./post\";\r\n\r\nexport const EVENTS = {\r\n    POST: POST_EVENTS,\r\n};\r\n\r\nexport default new PubSub();","export const CREATED = 'CREATED';","import React, { Component, Fragment } from \"react\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport withSession from \"./components/session/withSession\";\r\n\r\nimport Routes from \"./routes\";\r\nimport Header from \"./components/Header\";\r\n\r\n\r\nclass App extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    render() {\r\n        const session = this.props.session;\r\n        return (\r\n            <Fragment>\r\n                <Header session={session} />\r\n                <main>\r\n                    <Routes session={session}/>\r\n                </main>\r\n            </Fragment>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withRouter(withSession(App));","import React, { Component } from \"react\";\r\nimport { withRouter, NavLink, Link } from \"react-router-dom\";\r\n\r\nclass Header extends Component {\r\n\r\n    render() {\r\n        return (\r\n            <header>\r\n                <NavLink to='/signin'>SignIn</NavLink>\r\n                <NavLink to='/signup'>SignUp</NavLink>\r\n            </header>\r\n        )\r\n    }\r\n};\r\n\r\nexport default withRouter(Header);","import React from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { Query } from \"react-apollo\";\r\n\r\nimport { GET_CURRENT_USER } from \"../../queries/userQueries\";\r\n\r\nconst withAuth = conditionFn => Component => props => (\r\n    <Query query={GET_CURRENT_USER} notifyOnNetworkStatusChange>\r\n        {({data, loading, networkStatus}) => {\r\n            if (networkStatus !== 7) {\r\n                return null;\r\n            };\r\n\r\n            return conditionFn(data) ? \r\n            (<Component {...props} />) :\r\n            (<Redirect to='/signin' />);\r\n        }}\r\n    </Query>\r\n);\r\n\r\nexport default withAuth;\r\n","import React from \"react\";\r\nimport { Query } from \"react-apollo\";\r\nimport { GET_CURRENT_USER } from \"../../queries/userQueries\";\r\n\r\nconst withSession = Component => props => (\r\n    <Query query={GET_CURRENT_USER} >\r\n        {({ data, refetch }) => (\r\n            <Component  {...props} session={data} refetch={refetch}/>\r\n        )}\r\n    </Query>\r\n);\r\n\r\nexport default withSession;","import React from \"react\";\r\n\r\nconst Dashboard = () => {\r\n    return (\r\n        <h1>\r\n            Dashboard\r\n        </h1>\r\n    )\r\n};\r\n\r\nexport default Dashboard;","import React, { Fragment } from \"react\";\r\n\r\nconst Home = ({ session }) => {\r\n\r\n    return (\r\n        <Fragment>\r\n            <h1>Home</h1>\r\n        </Fragment>\r\n    )\r\n};\r\n\r\nexport default Home;","import React, { Component, Fragment } from \"react\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport { Mutation } from \"react-apollo\";\r\nimport gql from \"graphql-tag\";\r\nimport * as Cookies from \"es-cookie\";\r\n\r\nimport { Helmet } from \"react-helmet\";\r\n\r\nexport const SIGNIN_USER = gql`\r\n    mutation($email: String!, $password: String!) {\r\n        signIn(email: $email, password: $password) {\r\n            token\r\n            user\r\n        }\r\n    }\r\n`;\r\n\r\nconst initialState = {\r\n    email: '',\r\n    password: '',\r\n}\r\n\r\nclass SignIn extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            ...initialState\r\n        }\r\n    }\r\n\r\n    head() {\r\n        return (\r\n            <Helmet bodyAttributes={{ class: 'signIn'}}>\r\n                <title>LogIn - Apollo React App</title>\r\n            </Helmet>\r\n        )\r\n    }\r\n\r\n    onChange = e => {\r\n        const { name, value } = e.target;\r\n        this.setState({ [name]: value });\r\n    }\r\n\r\n    onSubmit = (e, signIn) => {\r\n        e.preventDefault();\r\n        signIn().then(async ({ data }) => {\r\n            this.setState({ ...initialState });\r\n\r\n            Cookies.set('token', data.signIn.token);\r\n\r\n            await this.props.refetch();\r\n\r\n            this.props.history.push('/dashboard');\r\n        }).catch(error => {\r\n            this.setState({\r\n                error: error.graphQLErrors.map(x => x.message)\r\n            });\r\n            console.error(\"ERR -\", error.graphQLErrors.map(x => x.message));\r\n        });\r\n    }\r\n\r\n    validationForm = () => {\r\n        const { email, password } = this.state;\r\n        const isInvalid = !email || !password;\r\n        return isInvalid;\r\n    }\r\n\r\n    render() {\r\n        const { email, password } = this.state;\r\n        return (\r\n            <Fragment>\r\n                <div class=\"login-wrapper\">\r\n                    <div class=\"logo ir\" />\r\n                    <span class=\"title\">Login</span>\r\n                    <Mutation \r\n                        mutation={SIGNIN_USER} \r\n                        variables={{ email, password}}\r\n                    >\r\n                    {(signIn, { data, loading, error}) => {\r\n                        return (\r\n                            <form name=\"form\" onSubmit={e => this.onSubmit(e, signIn)}>\r\n                                <fieldset>\r\n                                <div class=\"inputrow\">\r\n                                    <i class=\"fa icon-user fa-fw\" />\r\n                                    <input\r\n                                    type=\"text\"\r\n                                    name=\"email\"\r\n                                    id=\"user\"\r\n                                    placeholder=\"Email\"\r\n                                    onChange={this.onChange}\r\n                                    value={email}\r\n                                    autoFocus\r\n                                    required\r\n                                    />\r\n                                </div>\r\n                                <div class=\"inputrow\">\r\n                                    <i class=\"fa icon-key fa-fw\" />\r\n                                    <input\r\n                                    type=\"password\"\r\n                                    name=\"password\"\r\n                                    id=\"password\"\r\n                                    data-typetoggle=\"#show\"\r\n                                    onChange={this.onChange}\r\n                                    value={password}\r\n                                    placeholder=\"Password\"\r\n                                    required\r\n                                    />\r\n                                </div>\r\n\r\n                                <div class=\"remember\">\r\n                                    <input\r\n                                    type=\"checkbox\"\r\n                                    name=\"remember_login\"\r\n                                    value=\"1\"\r\n                                    id=\"remember_login\"\r\n                                    />\r\n                                    <label for=\"remember_login\" class=\"radio\">\r\n                                    Remember me\r\n                                    </label>\r\n                                </div>\r\n                                <div class=\"button-center\">\r\n                                    <button class=\"btn-log\" type=\"submit\" id=\"submit\">\r\n                                    SignIn\r\n                                    </button>\r\n                                    {loading && (\r\n                                    <img src=\"data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==\" />\r\n                                    )}\r\n                                </div>\r\n                                </fieldset>\r\n                            </form>\r\n                        )\r\n                    }}\r\n                    </Mutation>\r\n                </div>\r\n            </Fragment>\r\n        )\r\n    }\r\n};\r\n\r\nexport default withRouter(SignIn);","import React, { Component } from \"react\";\r\nimport { withRouter, Link } from \"react-router-dom\";\r\nimport { Mutation } from \"react-apollo\";\r\nimport gql from \"graphql-tag\";\r\nimport * as Cookies from \"es-cookie\";\r\nimport { Helmet } from \"react-helmet\";\r\n\r\n\r\nexport const SIGNUP_USER = gql`\r\n    mutation($username: String!, $email: String!, $password: String!, $firstName: String!, $lastName: String!, $profileImage: String) {\r\n        signUp(username: $username, email: $email, password: $password, firstName: $firstName, lastName: $lastName, profileImage:$profileImage) {\r\n            token\r\n            user\r\n        }\r\n    }\r\n`;\r\n\r\nconst initialState = {\r\n    username: '',\r\n    email: '',\r\n    password: '',\r\n    passwordConfirm: '',\r\n    firstName: '',\r\n    lastName: '',\r\n    passwordMatch: '',\r\n    error: ''\r\n}\r\n\r\nclass SignUp extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            ...initialState\r\n        }\r\n    }\r\n\r\n    head() {\r\n        return (\r\n            <Helmet bodyAttributes={{ class: 'signUp'}}>\r\n                <title>Join now - Apollo React App</title>\r\n            </Helmet>\r\n        )\r\n    }\r\n\r\n    onChange = e => {\r\n        const { name, value } = e.target;\r\n        this.setState({ [name]: value });\r\n    };\r\n\r\n    handleSubmit = (e, signUp, client) => {\r\n        e.preventDefault();\r\n        console.log(client);\r\n        signUp().then(async ({ data }) => {\r\n           Cookies.set('token', data.signUp.token);\r\n           await this.props.refresh();\r\n           this.setState({ ...initialState });\r\n           this.props.history.push('/');\r\n        }).catch(error => {\r\n            this.setState({\r\n                error: 'Either your email or username is already taken'\r\n            });\r\n        });\r\n    }\r\n\r\n    confirmPW = () => {\r\n        const { password, passwordConfirm } = this.state;\r\n        const isMatch = password !== passwordConfirm;\r\n        this.setState({\r\n            passwordMatch: isMatch\r\n        });\r\n    }\r\n\r\n    validateForm = () => {\r\n        const { firstName, lastName, email, userName, password, passwordConfirm } = this.state\r\n        const isInvalid = !firstName || !lastName || !email || !userName || !password || password !== passwordConfirm\r\n        return isInvalid;\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            username,\r\n            email,\r\n            password,\r\n            passwordConfirm,\r\n            firstName,\r\n            lastName,\r\n            passwordMatch\r\n        } = this.state;\r\n\r\n        return (\r\n            <div class=\"login-wrapper\">\r\n                {this.head()}\r\n                <span class=\"title\">SignUp</span>\r\n                <Mutation \r\n                mutation={SIGNUP_USER} \r\n                variables={{username, email, password, firstName, lastName}} \r\n                update={(cache, { data }) => {\r\n                    console.log(\"data\", data);\r\n                    console.log(\"cache\", cache);\r\n                }}\r\n                >\r\n                    {(signUp, {data, client, loading, error}) => {\r\n                        return(\r\n                            <form name=\"form\" onSubmit={e => this.handleSubmit(e, signUp, client)}>\r\n                                <fieldset>\r\n                                    \r\n                                    <div class=\"inputrow\">\r\n                                        <i class=\"fa icon-user fa-fw\" />\r\n                                        <input\r\n                                        type=\"text\"\r\n                                        name=\"username\"\r\n                                        id=\"username\"\r\n                                        placeholder=\"UserName\"\r\n                                        onChange={this.onChange}\r\n                                        onBlur={this.validateForm}\r\n                                        value={username}\r\n                                        autoFocus\r\n                                        required\r\n                                        />\r\n                                    </div>\r\n                                    <div class=\"inputrow\">\r\n                                        <i class=\"fa icon-user fa-fw\" />\r\n                                        <input\r\n                                        type=\"text\"\r\n                                        name=\"firstName\"\r\n                                        id=\"firstName\"\r\n                                        placeholder=\"FirstName\"\r\n                                        onChange={this.onChange}\r\n                                        value={firstName}\r\n                                        required\r\n                                        />\r\n                                    </div>\r\n                                    <div class=\"inputrow\">\r\n                                        <i class=\"fa icon-user fa-fw\" />\r\n                                        <input\r\n                                        type=\"text\"\r\n                                        name=\"lastName\"\r\n                                        id=\"lastName\"\r\n                                        placeholder=\"LastName\"\r\n                                        onChange={this.onChange}\r\n                                        value={lastName}\r\n                                        required\r\n                                        />\r\n                                    </div>\r\n                                    <div class=\"inputrow\">\r\n                                        <i class=\"fa icon-mail4 fa-fw\" />\r\n                                        <input\r\n                                        type=\"email\"\r\n                                        name=\"email\"\r\n                                        id=\"email\"\r\n                                        placeholder=\"Email\"\r\n                                        onChange={this.onChange}\r\n                                        value={email}\r\n                                        required\r\n                                        />\r\n                                    </div>\r\n                                    <div class=\"inputrow\">\r\n                                        <i class=\"fa icon-key fa-fw\" />\r\n                                        <input\r\n                                        type=\"password\"\r\n                                        name=\"password\"\r\n                                        id=\"password\"\r\n                                        data-typetoggle=\"#show\"\r\n                                        onChange={this.onChange}\r\n                                        value={password}\r\n                                        placeholder=\"Password\"\r\n                                        required\r\n                                        />\r\n                                    </div>\r\n                                    <div class=\"inputrow\">\r\n                                        <i class=\"fa icon-key fa-fw\" />\r\n                                        <input\r\n                                        type=\"password\"\r\n                                        name=\"passwordConfirm\"\r\n                                        id=\"passwordConfirm\"\r\n                                        data-typetoggle=\"#show\"\r\n                                        onChange={this.onChange}\r\n                                        onBlur={this.confirmPW}\r\n                                        value={passwordConfirm}\r\n                                        placeholder=\"Confirm Password\"\r\n                                        required\r\n                                        />\r\n                                    </div>\r\n\r\n                                    \r\n                                    <div class=\"button-center\">\r\n                                        <button class=\"btn-log\" type=\"submit\" id=\"submit\" disabled={passwordMatch || this.validateForm()} >\r\n                                        Register\r\n                                        </button>\r\n                                        {loading && (\r\n                                        <img src=\"data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==\" />\r\n                                        )}\r\n                                    </div>\r\n                                </fieldset>\r\n                            </form>\r\n                        )\r\n                    }}\r\n                </Mutation>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withRouter(SignUp)","import gql from \"graphql-tag\";\r\n\r\n\r\nexport const GET_CURRENT_USER = gql`\r\n    {\r\n        currentUser{\r\n            id\r\n            username\r\n            email\r\n            role\r\n        }\r\n    }\r\n`;\r\n\r\nexport const GET_CLIENT_USER = gql`\r\n    {\r\n        currentUser @client{\r\n            id\r\n            username\r\n            email\r\n            role\r\n        }\r\n    }\r\n`;","import React from \"react\";\r\nimport { Switch, Route, Redirect, withRouter } from \"react-router-dom\";\r\n\r\nimport SignUp from \"./containers/auth/signUp\";\r\nimport SignIn from \"./containers/auth/signIn\";\r\nimport Dashboard from \"./containers/Dashboard\";\r\nimport Home from \"./containers/Home\";\r\nimport withAuth from \"./components/session/withAuth\";\r\n\r\nconst Routes = ({session, refetch, ...props}) => {\r\n    const currentUser = session ? session.currentUser : null;\r\n    return (\r\n        <Switch>\r\n            <Route \r\n                exact\r\n                path='/'\r\n                component={() => <Home />}\r\n            />\r\n            <Route \r\n                exact\r\n                path='/signup'\r\n                render={props => \r\n                    currentUser \r\n                    ? <Redirect to='/' /> \r\n                    : <SignUp {...props} refetch={refetch} />}\r\n            />\r\n            <Route \r\n                exact\r\n                path='/signin'\r\n                render={props => \r\n                    currentUser \r\n                    ? <Redirect to='/' /> \r\n                    : <SignIn {...props} refetch={refetch} />}\r\n            />\r\n            <Route \r\n                exact\r\n                path= '/dashboard'\r\n                render={withAuth(session => session && session.currentUser)(Dashboard)}    \r\n            />\r\n        </Switch>\r\n    )\r\n};\r\n\r\nexport default withRouter(Routes);","module.exports = require(\"apollo-cache-inmemory\");","module.exports = require(\"apollo-client\");","module.exports = require(\"apollo-link-http\");","module.exports = require(\"apollo-link-schema\");","module.exports = require(\"apollo-server\");","module.exports = require(\"apollo-server-express\");","module.exports = require(\"axios\");","module.exports = require(\"babel-polyfill\");","module.exports = require(\"bcrypt\");","module.exports = require(\"body-parser\");","module.exports = require(\"cookie-parser\");","module.exports = require(\"cors\");","module.exports = require(\"dataloader\");","module.exports = require(\"dotenv/config\");","module.exports = require(\"es-cookie\");","module.exports = require(\"express\");","module.exports = require(\"fs\");","module.exports = require(\"generate-password\");","module.exports = require(\"graphql-resolvers\");","module.exports = require(\"graphql-tag\");","module.exports = require(\"graphql-tools\");","module.exports = require(\"http\");","module.exports = require(\"https\");","module.exports = require(\"isomorphic-unfetch\");","module.exports = require(\"jsonwebtoken\");","module.exports = require(\"mongoose\");","module.exports = require(\"path\");","module.exports = require(\"react\");","module.exports = require(\"react-apollo\");","module.exports = require(\"react-dom/server\");","module.exports = require(\"react-helmet\");","module.exports = require(\"react-router-dom\");"],"sourceRoot":""}