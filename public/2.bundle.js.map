{"version":3,"sources":["webpack:///./shared/containers/auth/signIn.js","webpack:///./shared/hooks/useFormInput.js"],"names":["Cookies","SIGNIN_USER","gql","initialState","email","password","SignInn","props","isInvalid","class","SignIn","onChange","e","target","name","value","setState","onSubmit","signIn","preventDefault","then","data","set","token","console","log","get","refetch","catch","error","graphQLErrors","map","x","message","validationForm","state","loading","Component","useFormInput","initialValue","setValue","handleChange"],"mappings":"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","file":"2.bundle.js","sourcesContent":["import React, { Component, Fragment, useState } from \"react\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport { Mutation, graphql } from \"react-apollo\";\r\nimport gql from \"graphql-tag\";\r\nimport * as Cookies from \"es-cookie\";\r\n\r\nimport { Helmet } from \"react-helmet\";\r\nimport useFormInput from \"../../hooks/useFormInput\";\r\nimport { log } from \"util\";\r\n\r\nexport const SIGNIN_USER = gql`\r\n    mutation($email: String!, $password: String!) {\r\n        signIn(email: $email, password: $password) {\r\n            token\r\n            user{\r\n                username\r\n                email\r\n                firstName\r\n                lastName\r\n                password\r\n            }\r\n        }\r\n    }\r\n`;\r\n\r\nconst initialState = {\r\n    email: '',\r\n    password: '',\r\n}\r\n\r\nfunction SignInn(props) {\r\n    const email = useFormInput('');\r\n    const password = useFormInput('');\r\n\r\n    const isInvalid = !email || !password;\r\n\r\n\r\n    return (\r\n        <Fragment>\r\n            <Helmet bodyAttributes={{ class: 'signIn'}}>\r\n                <title>LogIn - Apollo React App</title>\r\n            </Helmet>\r\n        </Fragment>\r\n    )\r\n}\r\n\r\n\r\nclass SignIn extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            ...initialState\r\n        }\r\n    }\r\n\r\n    head() {\r\n        return (\r\n            <Helmet bodyAttributes={{ class: 'signIn'}}>\r\n                <title>LogIn - Apollo React App</title>\r\n            </Helmet>\r\n        )\r\n    }\r\n\r\n    onChange = e => {\r\n        const { name, value } = e.target;\r\n        this.setState({ [name]: value });\r\n    }\r\n\r\n    onSubmit = (e, signIn) => {\r\n        e.preventDefault();\r\n        signIn().then(async ({ data }) => {\r\n            this.setState({ ...initialState });\r\n\r\n            Cookies.set('token', data.signIn.token);\r\n            console.log(data, Cookies.get('token'));\r\n            await this.props.refetch();\r\n\r\n            // this.props.history.push('/dashboard');\r\n        }).catch(error => {\r\n            this.setState({\r\n                error: error.graphQLErrors.map(x => x.message)\r\n            });\r\n            console.error(\"ERR -\", error.graphQLErrors.map(x => x.message));\r\n        });\r\n        \r\n    }\r\n\r\n    validationForm = () => {\r\n        const { email, password } = this.state;\r\n        const isInvalid = !email || !password;\r\n        return isInvalid;\r\n    }\r\n\r\n    render() {\r\n        const { email, password } = this.state;\r\n\r\n        return (\r\n            <Fragment>\r\n                <div class=\"login-wrapper\">\r\n                    <div class=\"logo ir\" />\r\n                    <span class=\"title\">Login</span>\r\n                    <Mutation \r\n                        mutation={SIGNIN_USER} \r\n                        variables={{ email, password}}\r\n                    >\r\n                    {(signIn, { data, loading, error}) => {\r\n                        console.log(\"data\", data);\r\n                        console.log(\"signin\", signIn);\r\n                        return (\r\n                            <form onSubmit={e => this.onSubmit(e, signIn)}>\r\n                                <fieldset>\r\n                                <div class=\"inputrow\">\r\n                                    <i class=\"fa icon-user fa-fw\" />\r\n                                    <input\r\n                                    type=\"text\"\r\n                                    name=\"email\"\r\n                                    id=\"user\"\r\n                                    placeholder=\"Email\"\r\n                                    onChange={this.onChange}\r\n                                    value={email}\r\n                                    autoFocus\r\n                                    required\r\n                                    />\r\n                                </div>\r\n                                <div class=\"inputrow\">\r\n                                    <i class=\"fa icon-key fa-fw\" />\r\n                                    <input\r\n                                    type=\"password\"\r\n                                    name=\"password\"\r\n                                    id=\"password\"\r\n                                    data-typetoggle=\"#show\"\r\n                                    onChange={this.onChange}\r\n                                    value={password}\r\n                                    placeholder=\"Password\"\r\n                                    required\r\n                                    />\r\n                                </div>\r\n\r\n                                <div class=\"remember\">\r\n                                    <input\r\n                                    type=\"checkbox\"\r\n                                    name=\"remember_login\"\r\n                                    value=\"1\"\r\n                                    id=\"remember_login\"\r\n                                    />\r\n                                    <label for=\"remember_login\" class=\"radio\">\r\n                                    Remember me\r\n                                    </label>\r\n                                </div>\r\n                                <div class=\"button-center\">\r\n                                    <button class=\"btn-log\" type=\"submit\" id=\"submit\">\r\n                                    SignIn\r\n                                    </button>\r\n                                    {loading && (\r\n                                    <img src=\"data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==\" />\r\n                                    )}\r\n                                </div>\r\n                                </fieldset>\r\n                            </form>\r\n                        )\r\n                    }}\r\n                    </Mutation>\r\n                </div>\r\n            </Fragment>\r\n        )\r\n    }\r\n};\r\n\r\nexport default withRouter(SignIn);","import { useState } from \"react\";\r\n\r\nexport default function useFormInput(initialValue) {\r\n    const [value, setValue] = useState(initialValue);\r\n\r\n    function handleChange(e) {\r\n        setValue(e.target.value);\r\n    };\r\n\r\n    return {\r\n        value,\r\n        onChange: handleChange,\r\n    };\r\n}"],"sourceRoot":""}