{"version":3,"sources":["webpack:///./shared/containers/auth/signUp.js","webpack:///./shared/hooks/useFormInput.js"],"names":["Cookies","SIGNUP_USER","gql","initialState","username","email","password","passwordConfirm","firstName","lastName","passwordMatch","error","SignUpp","props","data","isInvalid","class","SignUp","onChange","e","target","name","value","setState","handleSubmit","signUp","client","preventDefault","console","log","then","set","token","refresh","history","push","catch","confirmPW","state","isMatch","validateForm","userName","head","cache","loading","Component","useFormInput","initialValue","setValue","handleChange"],"mappings":"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","file":"1.bundle.js","sourcesContent":["import React, { Component, useContext } from \"react\";\nimport { withRouter, Link } from \"react-router-dom\";\nimport { Mutation, Query } from \"react-apollo\";\nimport gql from \"graphql-tag\";\nimport * as Cookies from \"es-cookie\";\nimport { Helmet } from \"react-helmet\";\n\nimport useFormInput from \"../../hooks/useFormInput\";\n\n\nexport const SIGNUP_USER = gql`\n    mutation($username: String!, $email: String!, $password: String!, $firstName: String!, $lastName: String!, $profileImage: String) {\n        signUp(username: $username, email: $email, password: $password, firstName: $firstName, lastName: $lastName, profileImage:$profileImage) {\n            token\n            user\n        }\n    }\n`;\n\nconst initialState = {\n    username: '',\n    email: '',\n    password: '',\n    passwordConfirm: '',\n    firstName: '',\n    lastName: '',\n    passwordMatch: '',\n    error: ''\n}\n\nfunction SignUpp(props) {\n    const username = useFormInput('');\n    const email = useFormInput('');\n    const password = useFormInput('');\n    const passwordConfirm = useFormInput('');\n    const firstName = useFormInput('');\n    const lastName = useFormInput('');\n\n    const { data } = useContext();\n    \n    const passwordMatch = password !== passwordConfirm;\n    const isInvalid = !firstName || !lastName || !email || !username || !password || password !== passwordConfirm\n\n    return (\n        <div class=\"login-wrapper\" >\n            <Helmet bodyAttributes={{ class: 'signUp'}}>\n                <title>Join now - Apollo React App</title>\n            </Helmet>\n        </div>\n    )\n}\n\nclass SignUp extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState\n        }\n    }\n\n    head() {\n        return (\n            <Helmet bodyAttributes={{ class: 'signUp'}}>\n                <title>Join now - Apollo React App</title>\n            </Helmet>\n        )\n    }\n\n    onChange = e => {\n        const { name, value } = e.target;\n        this.setState({ [name]: value });\n    };\n\n    handleSubmit = (e, signUp, client) => {\n        e.preventDefault();\n        console.log(client);\n        signUp().then(async ({ data }) => {\n           Cookies.set('token', data.signUp.token);\n           await this.props.refresh();\n           this.setState({ ...initialState });\n           this.props.history.push('/');\n        }).catch(error => {\n            this.setState({\n                error: 'Either your email or username is already taken'\n            });\n        });\n    }\n\n    confirmPW = () => {\n        const { password, passwordConfirm } = this.state;\n        const isMatch = password !== passwordConfirm;\n        this.setState({\n            passwordMatch: isMatch\n        });\n    }\n\n    validateForm = () => {\n        const { firstName, lastName, email, userName, password, passwordConfirm } = this.state\n        const isInvalid = !firstName || !lastName || !email || !userName || !password || password !== passwordConfirm\n        return isInvalid;\n    }\n\n    render() {\n        const {\n            username,\n            email,\n            password,\n            passwordConfirm,\n            firstName,\n            lastName,\n            passwordMatch\n        } = this.state;\n\n        return (\n            <div class=\"login-wrapper\">\n                {this.head()}\n                <span class=\"title\">SignUp</span>\n                <Mutation \n                mutation={SIGNUP_USER} \n                variables={{username, email, password, firstName, lastName}} \n                update={(cache, { data }) => {\n                    console.log(\"data\", data);\n                    console.log(\"cache\", cache);\n                }}\n                >\n                    {(signUp, {data, client, loading, error}) => {\n                        return(\n                            <form name=\"form\" onSubmit={e => this.handleSubmit(e, signUp, client)}>\n                                <fieldset>\n                                    \n                                    <div class=\"inputrow\">\n                                        <i class=\"fa icon-user fa-fw\" />\n                                        <input\n                                        type=\"text\"\n                                        name=\"username\"\n                                        id=\"username\"\n                                        placeholder=\"UserName\"\n                                        onChange={this.onChange}\n                                        onBlur={this.validateForm}\n                                        value={username}\n                                        autoFocus\n                                        required\n                                        />\n                                    </div>\n                                    <div class=\"inputrow\">\n                                        <i class=\"fa icon-user fa-fw\" />\n                                        <input\n                                        type=\"text\"\n                                        name=\"firstName\"\n                                        id=\"firstName\"\n                                        placeholder=\"FirstName\"\n                                        onChange={this.onChange}\n                                        value={firstName}\n                                        required\n                                        />\n                                    </div>\n                                    <div class=\"inputrow\">\n                                        <i class=\"fa icon-user fa-fw\" />\n                                        <input\n                                        type=\"text\"\n                                        name=\"lastName\"\n                                        id=\"lastName\"\n                                        placeholder=\"LastName\"\n                                        onChange={this.onChange}\n                                        value={lastName}\n                                        required\n                                        />\n                                    </div>\n                                    <div class=\"inputrow\">\n                                        <i class=\"fa icon-mail4 fa-fw\" />\n                                        <input\n                                        type=\"email\"\n                                        name=\"email\"\n                                        id=\"email\"\n                                        placeholder=\"Email\"\n                                        onChange={this.onChange}\n                                        value={email}\n                                        required\n                                        />\n                                    </div>\n                                    <div class=\"inputrow\">\n                                        <i class=\"fa icon-key fa-fw\" />\n                                        <input\n                                        type=\"password\"\n                                        name=\"password\"\n                                        id=\"password\"\n                                        data-typetoggle=\"#show\"\n                                        onChange={this.onChange}\n                                        value={password}\n                                        placeholder=\"Password\"\n                                        required\n                                        />\n                                    </div>\n                                    <div class=\"inputrow\">\n                                        <i class=\"fa icon-key fa-fw\" />\n                                        <input\n                                        type=\"password\"\n                                        name=\"passwordConfirm\"\n                                        id=\"passwordConfirm\"\n                                        data-typetoggle=\"#show\"\n                                        onChange={this.onChange}\n                                        onBlur={this.confirmPW}\n                                        value={passwordConfirm}\n                                        placeholder=\"Confirm Password\"\n                                        required\n                                        />\n                                    </div>\n\n                                    \n                                    <div class=\"button-center\">\n                                        <button class=\"btn-log\" type=\"submit\" id=\"submit\" disabled={passwordMatch || this.validateForm()} >\n                                        Register\n                                        </button>\n                                        {loading && (\n                                        <img src=\"data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==\" />\n                                        )}\n                                    </div>\n                                </fieldset>\n                            </form>\n                        )\n                    }}\n                </Mutation>\n            </div>\n        )\n    }\n}\n\nexport default withRouter(SignUp)","import { useState } from \"react\";\n\nexport default function useFormInput(initialValue) {\n    const [value, setValue] = useState(initialValue);\n\n    function handleChange(e) {\n        setValue(e.target.value);\n    };\n\n    return {\n        value,\n        onChange: handleChange,\n    };\n}"],"sourceRoot":""}